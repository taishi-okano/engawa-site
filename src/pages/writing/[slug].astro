---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{entry.data.title} — engawa</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  {entry.data.canonicalURL && <link rel="canonical" href={entry.data.canonicalURL} />}

<style>
    /* ...既存の変数はそのままでOK... */
    :root {
      --bg: #F5F0E8;
      --sumi: #1C1917;
      --text: #3D3935;
      --kakishibu: #D4976C;
      --line: rgba(28, 25, 23, 0.08);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; -webkit-font-smoothing: antialiased; line-height: 1.8; }
    
    .nav { display: flex; justify-content: space-between; padding: 2rem 3rem; border-bottom: 1px solid var(--line); }
    .logo { font-family: 'Lora', serif; font-size: 1.1rem; font-weight: 600; text-decoration: none; color: var(--sumi); }
    
    .container { max-width: 720px; margin: 0 auto; padding: 6rem 1.5rem; }
    
    .date { font-size: 0.85rem; opacity: 0.5; margin-bottom: 0.5rem; display: block; }
    
    /* タイトル周りの調整 */
    h1 { font-family: 'Lora', serif; font-size: clamp(2rem, 5vw, 3rem); font-weight: 600; line-height: 1.2; margin-bottom: 1rem; color: var(--sumi); }
    
    /* サブタイトル用のクラス */
    .subtitle {
      font-family: 'DM Sans', sans-serif;
      font-size: 1.2rem;
      line-height: 1.5;
      color: var(--kakishibu); /* アクセントカラーを使用 */
      margin-bottom: 3rem;
      font-weight: 500;
    }

    /* 記事本文のデザイン */
    .content { font-size: 1rem; color: var(--text); opacity: 0.9; }
    .content h2 { font-family: 'Lora', serif; color: var(--sumi); margin: 4rem 0 1.5rem; font-size: 1.8rem; border-bottom: 1px solid var(--line); padding-bottom: 0.5rem; }
    .content h3 { font-family: 'Lora', serif; color: var(--sumi); margin: 3rem 0 1rem; font-size: 1.4rem; }
    .content p { margin-bottom: 1.5rem; }
    .content ul, .content ol { margin-bottom: 1.5rem; padding-left: 1.5rem; }
    .content li { margin-bottom: 0.5rem; }

    /* TL;DR (Blockquote) のデザイン刷新 */
    .content blockquote {
      background: rgba(212, 151, 108, 0.08); /* 柿渋色の薄い背景 */
      border-left: 4px solid var(--kakishibu);
      padding: 1.5rem 2rem;
      border-radius: 4px;
      margin: 2.5rem 0;
      color: var(--text);
      font-style: normal; /* イタリック解除 */
    }
    /* TL;DRの見出しを太字で強調 */
    .content blockquote strong {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--kakishibu);
      font-family: 'Lora', serif;
      font-size: 1.1rem;
    }

    /* テーブルのデザイン (Trinity用) */
    .content table {
      width: 100%;
      border-collapse: collapse;
      margin: 2rem 0;
      font-size: 0.9rem;
    }
    .content th {
      text-align: left;
      border-bottom: 2px solid var(--line);
      padding: 0.75rem;
      font-family: 'Lora', serif;
      color: var(--sumi);
    }
    .content td {
      border-bottom: 1px solid var(--line);
      padding: 0.75rem;
      vertical-align: top;
    }

    footer { padding: 4rem 3rem; border-top: 1px solid var(--line); text-align: center; font-size: 0.75rem; opacity: 0.4; }
  </style>

</head>
<body>
  <nav class="nav">
    <a href="/" class="logo">engawa</a>
    <div style="display:flex; gap:2rem; font-size:0.85rem;">
      <a href="/" style="text-decoration:none; color:inherit; opacity:0.6;">Home</a>
      <a href="/about" style="text-decoration:none; color:inherit; opacity:0.6;">About</a>
    </div>
  </nav>

  <main class="container">
    <article>
      <p class="date">{entry.data.pubDate} — {entry.data.category}</p>
      <h1>{entry.data.title}</h1>
      <div class="content">
        <Content />
      </div>
    </article>
  </main>

  <footer>
    <p>engawa · Taishi Okano · © 2026</p>
  </footer>
</body>
</html>